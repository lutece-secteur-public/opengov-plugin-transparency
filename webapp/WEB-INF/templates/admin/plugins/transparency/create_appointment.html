
<@box>
	<@boxHeader title='#i18n{transparency.create_appointment.title}' />
	<@boxBody>
    <@tform name='create_appointment' action='jsp/admin/plugins/transparency/ManageAppointments.jsp'>

        <@messages errors=errors />
            <input type="hidden" id="id" name="id"/>
        
                    <@formGroup labelKey='#i18n{transparency.create_appointment.labelTitle}' helpKey='#i18n{transparency.create_appointment.labelTitle.help}' mandatory=true>
                            <@input type='text' name='title' value='${appointment.title!\'\'}' />
                    </@formGroup>
                    <@formGroup labelKey='#i18n{transparency.create_appointment.labelDescription}' helpKey='#i18n{transparency.create_appointment.labelDescription.help}' >
                            <@input type='text' name='description' value='${appointment.description!\'\'}' />
                    </@formGroup>
                    <@formGroup labelKey='#i18n{transparency.create_appointment.labelStartDate}' helpKey='#i18n{transparency.create_appointment.labelStartDate.help}' mandatory=true>
                            <@input type='text' name='start_date' id='start_date' value='${appointment.startDate!\'\'}' />
                    </@formGroup>

                    <!--
                    <@formGroup labelKey='#i18n{transparency.create_appointment.labelTypeLabel}' helpKey='#i18n{transparency.create_appointment.labelTypeLabel.help}' >
                            <@input type='text' name='type_label' value='${appointment.typeLabel!\'\'}' />
                    </@formGroup>
                    -->

                    <@formGroup labelKey='#i18n{transparency.create_appointment.contactsLabel}' helpKey='#i18n{transparency.create_appointment.contactsLabel.help}' >
                            <@input type="text" name="contacts" value="${appointment.contacts!''}" />
                    </@formGroup>

                    <!--
                    <@formGroup labelKey='#i18n{transparency.create_appointment.labelUrl}' helpKey='#i18n{transparency.create_appointment.labelUrl.help}' >
                            <@input type='text' name='url' value='${appointment.url!\'\'}' />
                    </@formGroup>
                    -->

                    <@formGroup labelKey='#i18n{transparency.create_appointment.labelElectedOfficials}' helpKey='#i18n{transparency.create_appointment.labelElectedOfficials.help}' >
                            <@select name='id_elected_official'  default_value="-1" items=electedofficials_list />
                    </@formGroup>	

                    <@formGroup labelKey='#i18n{transparency.create_appointment.labelLobby}' helpKey='#i18n{transparency.create_appointment.labelLobby.help}' >
                            <@input type='text' name='lobby_select' id='lobby_select' value='' />
                    </@formGroup>

                    <input type='hidden' name='lobby_id' id='lobby_id' value='' />

                    <@actionButtons button1Name="action_createAppointment" button2Name="view_manageAppointment"/>
            </@tform>
	</@boxBody>
</@box>

<script  type="text/javascript" >
    /**
     * lobby search by autocompletion
     */
    $( function() 
    {

      var getData = function (request, response) 
      {
          $.getJSON(
              "${base_url}rest/transparency/api/v1/lobbies/search=" + request.term,
              function (data) 
              {
                  response(data);
              }
          );
      };

      $( "#lobby_select" ).autocomplete(
      {
        source: getData,
        minLength: 3,
        select: function( event, ui ) 
        {
          $( "#lobby_id" ).val( ui.item.id  );
        }
      });
    } );
</script>

<script src="js/bootstrap-datepicker.min.js"></script>
<script src="js/locales/bootstrap-datepicker.fr.js" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8">
    /**
     * add date pickers 
     */
    $( function() {
            $("#start_date").datepicker({language: 'fr', orientation: 'bottom', maxDate: '0'});
    });
</script>